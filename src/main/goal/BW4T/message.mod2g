use robot as knowledge.
use messageTranslation as knowledge.
use human as actionspec.

exit=always.

module message {
	% we still need to translate these messages.
	forall (Agt).sent(msg(Mess)), bel(translate(Agt,Mess,Transl), strjoin([Agt, ' says'],WhoSays)) 
	do sendToGUI(WhoSays,Transl).

	% handle user's request to send message.
	% 'all' and 'allother' can't be in a variable anymore. Treat separately. 
	
	forall percept(sendMessage(all,Mess)), bel(me(Me), translate(Me,Mess,Transl))
	do all.send(msg(Mess)) + sendToGUI('I say',Transl).
	
	forall percept(sendMessage(allother,Mess)), bel(me(Me), translate(Me,Mess,Transl))
	do allother.send(msg(Mess)) + sendToGUI('I say',Transl).
	
	forall percept(sendMessage(Receiver,Mess)), bel(not(Receiver=all), not(Receiver=allother), me(Me), translate(Me,Mess,Transl))
	do (Receiver).send(msg(Mess)) + sendToGUI('I say',Transl).
 
}
